---
layout: post
title: Minio部署教程
abbrlink: 46fc8f12c45c4e5a85814978436d499e
tags:
  - docker-compose
  - docker
  - minio
categories:
  - blog
  - Docker技术
date: 1757498273120
updated: 1757644910338
---

 

***

# 使用 Docker 部署和管理 MinIO

## 1. 安装 Docker

首先，你需要在你的系统上安装 **Docker**。如果还没安装，请访问 [Docker 官方安装教程](https://docs.docker.com/get-docker/)，根据你的操作系统选择相应的安装指南。

## 2. 拉取 MinIO 镜像

MinIO 是一个开源的对象存储服务，与 Amazon S3 API 高度兼容。我们将从 Docker Hub 上拉取官方的 MinIO 镜像。

打开终端或命令提示符，运行以下命令：

```Bash
docker pull minio/minio
```

## 3. 运行 MinIO 容器

拉取完镜像后，我们可以使用 `docker run` 命令来创建并运行一个 MinIO 容器。运行容器时，你需要设置一些重要的参数：

- `-p 9000:9000`：将容器的 **9000** 端口映射到主机的 **9000** 端口。这是 MinIO 的 API 和 Web UI 端口。

- `-p 9001:9001`：将容器的 **9001** 端口映射到主机的 **9001** 端口。这是 MinIO 控制台的端口。

- `-v /path/to/your/data:/data`：将主机的本地目录映射到容器内部的 `/data` 目录，用于**持久化存储**所有数据。请将 `/path/to/your/data` 替换为你自己的本地目录。

- `-e MINIO_ROOT_USER`：设置 MinIO 的根用户名。

- `-e MINIO_ROOT_PASSWORD`：设置 MinIO 的根用户密码，密码必须至少 8 个字符。

- `--name minio_server`：为容器指定一个易于管理的名字，这里我们命名为 `minio_server`。

- `minio/minio server /data --console-address ":9001"`：这是 MinIO 的启动命令，`server /data` 指定数据存储目录为 `/data`，`--console-address ":9001"` 开启控制台并指定端口为 9001。

以下是完整的运行命令：

```Bash
docker run -d \
  -p 9000:9000 \
  -p 9001:9001 \
  --name minio_server \
  -v /path/to/your/data:/data \
  -e MINIO_ROOT_USER=minioadmin \
  -e MINIO_ROOT_PASSWORD=minioadmin \
  minio/minio server /data --console-address <span style="color: rgb(24, 128, 56);">":9001"</span>
```

\==**请务必将 `/path/to/your/data` 替换为你希望保存 MinIO 文件的本地目录，并根据需要修改用户名和密码。**==

***

# 使用 Docker Compose 部署 MinIO

使用 Docker Compose 可以更轻松地管理和配置复杂的多容器应用，只需一个 YAML 文件即可定义服务。

## 1. 安装 Docker Compose

如果你使用的是 Docker Desktop，Docker Compose 已经内置。如果不是，你需要单独安装。请参考 [Docker Compose 官方安装教程](https://docs.docker.com/compose/install/)。

## 2. 创建 docker-compose.yml 文件

在你的项目目录下，创建一个名为 `docker-compose.yml` 的文件。

将以下内容复制到文件中：

```YAML
version: "3.9"

services:
  minio:
    image: minio/minio
    container_name: minio_server
    ports:
      - "9000:9000"
      - "9001:9001"
    volumes:
      - ./data:/data  # 将当前目录下的 data 文件夹映射到容器的 /data
    environment:
      MINIO_ROOT_USER: minioadmin
      MINIO_ROOT_PASSWORD: minioadmin
    command: minio server /data --console-address ":9001"
    restart: unless-stopped
```

- `version: "3.9"`：指定 Docker Compose 文件的版本。

- `services:`：定义一组服务。这里我们只有一个服务，名为 `minio`。

- `image: minio/minio`：指定使用的镜像。

- `container_name: minio_server`：为容器指定名称。

- `ports:`：定义端口映射。

- `volumes:`：定义数据卷映射，这里将 `./data`（当前目录下的 `data` 文件夹）映射到容器的 `/data`。

- `environment:`：设置环境变量，用于定义 MinIO 的根用户名和密码。

- `command:`：定义容器启动时执行的命令。

- `restart: unless-stopped`：设置容器在退出时自动重启，除非你手动停止。

## 3. 启动容器

在 `docker-compose.yml` 文件所在的目录中，打开终端，运行以下命令来启动 MinIO 服务：

```Bash
docker-compose up -d
```

- `up`：根据 `docker-compose.yml` 文件创建并启动服务。

- `-d`：在后台运行容器（**d**etached 模式）。

现在，你的 MinIO 容器就已经成功运行了。

***

# 访问和管理 MinIO

## 1. 访问 MinIO 控制台

无论是使用 docker run 还是 docker-compose，容器成功运行后，你都可以通过浏览器访问 MinIO 的 Web 控制台了。

打开你的浏览器，访问以下地址：

[http://your\_ip:9001](http://localhost:9001)

你将看到 MinIO 的登录界面。使用你在上面设置的用户名和密码登录（默认为 minioadmin/minioadmin）。

登录后，你可以在控制台创建存储桶（buckets）、上传文件、管理用户和查看统计信息等。

## 2. 管理和维护

### **使用 Docker 命令：**

- **查看运行中的容器：** `docker ps`

- **停止容器：** `docker stop minio_server`

- **启动已停止的容器：** `docker start minio_server`

- **删除容器：** `docker rm minio_server`

- **删除镜像：** `docker rmi minio/minio` （在删除镜像之前，你需要先删除依赖于它的容器。）

### **使用 Docker Compose 命令：**

- **停止并移除容器、网络和卷：** `docker-compose down`

- **只停止服务：** `docker-compose stop`

- **重新启动服务：** `docker-compose start`

- **查看服务状态：** `docker-compose ps`

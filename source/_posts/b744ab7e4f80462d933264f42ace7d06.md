---
layout: post
title: Mysql部署教程
abbrlink: b744ab7e4f80462d933264f42ace7d06
tags:
  - mysql
  - docker
categories:
  - blog
  - Docker技术
date: 1757492997489
updated: 1757553188870
category_bar: true
---

***

### 1. 安装 Docker

首先，你需要确保你的系统上已经安装了 Docker。如果你还没有安装，请访问 [Docker 官方网站](https://www.docker.com/)，根据你的操作系统找到对应的安装指南并进行安装。

***

### 2. 拉取 MySQL 镜像

Docker Hub 是一个官方的镜像仓库，我们通常从这里拉取镜像。在这里，我们将拉取最新版本的 MySQL 镜像。

打开终端或命令提示符，运行以下命令：

```bash
docker pull mysql
```

如果你想指定一个特定的版本，可以在镜像名称后面加上标签，例如：

```bash
docker pull mysql:8.0
```

***

### 3. 运行 MySQL 容器

拉取完镜像后，我们就可以创建并运行一个 MySQL 容器了。在运行容器时，我们需要设置一些重要的参数：

- `-d`：让容器在后台运行。

- `--name`：为你的容器指定一个名称，方便管理。

- `-p`：将容器内部的端口映射到宿主机的端口。`3306:3306` 表示将容器的 3306 端口映射到宿主机的 3306 端口。

- `-e MYSQL_ROOT_PASSWORD`：设置 **root** 用户的密码。这是一个强制性的参数。

- `mysql`：指定要运行的镜像名称。

下面是基本的运行命令：

```bash
docker run -d --name mysql_container -p 3306:3306 -e MYSQL_ROOT_PASSWORD=your_strong_password mysql
```

请务必将 `your_strong_password` 替换为你自己的密码。

***

### 4. 连接到 MySQL 容器

容器成功运行后，你可以通过多种方式连接到它：

**方式一：通过 Docker Exec 命令**

你可以直接在容器内部执行命令。这对于简单的数据库操作或调试很有用。

首先，进入容器的命令行界面：

```bash
docker exec -it mysql_container bash
```

然后，在容器内部使用 MySQL 客户端连接到数据库：

```bash
mysql -u root -p
```

系统会提示你输入之前设置的密码。输入正确密码后，你就可以开始使用 MySQL 了。

**方式二：通过外部 MySQL 客户端**

你可以使用任何外部的数据库管理工具（如 DBeaver, MySQL Workbench, Navicat 等）连接到宿主机的 `localhost:3306`，并使用你设置的密码登录。

- **主机/IP地址**：`127.0.0.1` 或 `localhost`

- **端口**：`3306`

- **用户名**：`root`

- **密码**：你之前设置的密码

***

### 5. 管理和维护

- **查看运行中的容器**：

  ```bash
  docker ps
  ```

- **停止容器**：

  ```bash
  docker stop mysql_container
  ```

- **启动已停止的容器**：

  ```bash
  docker start mysql_container
  ```

- **删除容器**：

  ```bash
  docker rm mysql_container
  ```

- **删除镜像**：

  ```bash
  docker rmi mysql
  ```

  在删除镜像之前，你需要先删除依赖于它的容器。

### 高级设置：数据持久化

默认情况下，如果容器被删除，容器内的数据也会丢失。为了避免这种情况，你需要将数据存储到宿主机上。这可以通过\*\*数据卷（Volume）\*\*来实现。

在运行命令中，添加 `-v` 参数来映射一个本地目录到容器的数据库目录。

```bash
docker run -d --name mysql_container_persist \
-p 3306:3306 \
-e MYSQL_ROOT_PASSWORD=your_strong_password \
-v /path/to/your/data:/var/lib/mysql \
mysql
```

请将 `/path/to/your/data` 替换为你希望保存数据库文件的本地目录。这样做可以确保即使容器被删除，你的数据也不会丢失，并且可以在新的容器中重新使用。

现在，你已经掌握了使用 Docker 部署 MySQL 的基本方法。希望这个指南对你有所帮助！

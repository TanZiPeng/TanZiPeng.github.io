---
layout: post
title: Unified测试用例
abbrlink: bdada8127d8243f8979cbac558941019
tags:
  - unified
  - 测试
  - 测试用例
  - 摘要
categories:
  - 工作笔记
  - 测试相关
date: 1756274046406
updated: 1756284298411
---

### PROJ-001 - 创建项目（有效 GCP Key）

模块：项目管理\
用例 ID：PROJ-001\
用例名称：创建项目（有效 GCP Key）\
测试类型：正常场景

前置条件：

1. 运营端登录；
2. 准备有效 GCP AK/SK（已在 GCP 控制台验证权限）。

测试步骤：a

1. 进入【项目管理】→【创建项目】；
2. 输入项目 ID（如 projA）、GCP AK、GCP SK；
3. 点击【验证 GCP Key 可用性】→验证通过后提交。

预期结果：

1. 项目创建成功，状态为【启用】；
2. 数据库 project 表新增记录，关联 GCP Key；
3. 后续客户绑定该项目时，可正常关联。

***

### PROJ-002 - 创建项目（无效 GCP Key）

模块：项目管理\
用例 ID：PROJ-002\
用例名称：创建项目（无效 GCP Key）\
测试类型：异常场景

前置条件：

1. 运营端登录；
2. 准备无效 GCP AK/SK（如已过期）。

测试步骤：

1. 重复 PROJ-001 步骤，输入无效 GCP Key；
2. 点击【验证 GCP Key 可用性】。

预期结果：

1. 验证失败，提示 “GCP Key 无效或权限不足”；
2. 项目创建失败，数据库无记录。

***

### PROJ-003 - 编辑项目 GCP Key（替换有效 Key）

模块：项目管理\
用例 ID：PROJ-003\
用例名称：编辑项目 GCP Key（替换有效 Key）\
测试类型：正常场景

前置条件：

1. 项目 projA 已创建（关联 GCP-1，状态【启用】）；
2. 准备新有效 GCP-2 Key。

测试步骤：

1. 进入 projA 详情页→【编辑 GCP Key】；
2. 输入 GCP-2 AK/SK→验证→保存。

预期结果：

1. 项目关联的 GCP Key 更新为 GCP-2；
2. 历史 API 调用仍关联 GCP-1，新调用关联 GCP-2；
3. 数据库 project 表 GCP Key 字段更新。

***

### PROJ-004 - 禁用 / 启用项目

模块：项目管理\
用例 ID：PROJ-004\
用例名称：禁用 / 启用项目\
测试类型：关联场景

前置条件：\
项目 projA 已创建（状态【启用】），且绑定客户 C1。

测试步骤：

1. 禁用 projA→查看客户 C1 的 API 调用状态；
2. 启用 projA→再次查看。

预期结果：

1. 禁用后：客户 C1 的所有 API 调用失败（提示 “项目已禁用”）；
2. 启用后：客户 C1 的 API 调用恢复正常；
3. 项目状态与数据库 project.is\_active 字段同步。

***

### PROJ-005 - 项目 GCP Key 重复验证

模块：项目管理\
用例 ID：PROJ-005\
用例名称：项目 GCP Key 重复验证\
测试类型：边界场景

前置条件：\
项目 projA 已创建（关联 GCP-1，验证通过）。

测试步骤：

1. 进入 projA 详情页→【重新验证 GCP Key】（GCP-1 仍有效）；
2. 重复验证 3 次。

预期结果：

1. 每次验证均提示 “GCP Key 可用”；
2. 项目状态保持【启用】，无重复创建逻辑。

***

### PROJ-006 - 项目删除（无绑定客户）

模块：项目管理\
用例 ID：PROJ-006\
用例名称：项目删除（无绑定客户）\
测试类型：正常 / 边界场景

前置条件：

1. 运营端登录；
2. 项目 projC 已创建（状态【启用】），未绑定任何客户。

测试步骤：

1. 进入 projC 详情页→【删除项目】；
2. 确认删除弹窗（提示 “无绑定客户，可删除”）→提交。

预期结果：

1. 项目删除成功，从项目列表消失；
2. 数据库 project 表记录标记为【已删除】（或物理删除，视设计）；
3. 无关联数据残留（如 GCP Key 关联记录同步清理）。

***

### PROJ-007 - 项目删除（已绑定客户）

模块：项目管理\
用例 ID：PROJ-007\
用例名称：项目删除（已绑定客户）\
测试类型：异常场景

前置条件：

1. 运营端登录；
2. 项目 projA 已创建，绑定客户 C1（C1 状态【启用】）。

测试步骤：

1. 进入 projA 详情页→【删除项目】；
2. 查看系统提示。

预期结果：

1. 删除操作被阻断，提示 “该项目已绑定客户 C1，请先解绑客户再删除”；
2. 项目状态保持【启用】，数据库无变化。

***

# 客户管理

### CUST-008 - 创建客户（绑定有效项目）

模块：客户管理\
用例 ID：CUST-008\
用例名称：创建客户（绑定有效项目）\
测试类型：正常场景

前置条件：

1. 运营端登录；
2. 项目 projA 已创建（状态【启用】）。

测试步骤：

1. 进入【客户管理】→【创建客户】；
2. 输入客户信息，选择 projA→提交。

预期结果：

1. 客户创建成功，状态【启用】；
2. 同步创建客户端初始用户（如 client\_user）；
3. 数据库 customer 表 project\_id 关联 projA。

***

### CUST-009 - 创建客户（绑定无效项目）

模块：客户管理\
用例 ID：CUST-009\
用例名称：创建客户（绑定无效项目）\
测试类型：异常场景

前置条件：

1. 运营端登录；
2. 项目 projB 已禁用（或未验证）。

测试步骤：

1. 重复 CUST-006 步骤，选择 projB→提交。

预期结果：

1. 提示 “所选项目无效（未验证 / 已禁用），请更换”；
2. 客户创建失败，数据库无记录。

***

### CUST-010 - 客户绑定多个项目（冲突验证）

模块：客户管理\
用例 ID：CUST-010\
用例名称：客户绑定多个项目（冲突验证）\
测试类型：异常场景

前置条件：\
客户 C1 已绑定 projA（状态【启用】）。

测试步骤：

1. 进入 C1 详情页→【更换项目】；
2. 选择 projB（已启用）→提交。

预期结果：

1. 提示 “一个客户仅支持绑定 1 个项目，请先解绑当前项目”；
2. C1 仍绑定 projA，无变化。

***

### CUST-011 - 客户禁用后 API 调用限制

模块：客户管理\
用例 ID：CUST-011\
用例名称：客户禁用后 API 调用限制\
测试类型：关联场景

前置条件：\
客户 C1 已创建（状态【启用】），旗下有启用的 Unified Key。

测试步骤：

1. 禁用 C1→用其 Unified Key 调用 API；
2. 启用 C1→再次调用。

预期结果：

1. 禁用时：API 调用返回 “客户已禁用，无法调用”；
2. 启用时：API 调用恢复正常；
3. 客户状态与 customer.is\_active 同步。

***

### CUST-012 - 客户信息编辑（修改基础信息）

模块：客户管理\
用例 ID：CUST-012\
用例名称：客户信息编辑（修改基础信息）\
测试类型：正常场景

前置条件：

1. 运营端登录；
2. 客户 C1 已创建（绑定 projA，状态【启用】）。

测试步骤：

1. 进入 C1 详情页→【编辑客户】；
2. 修改客户名称（如 C1→C1\_更新）、联系人电话→提交。

预期结果：

1. 客户信息更新成功，列表和详情页显示新信息；
2. 数据库 customer 表对应字段同步更新；
3. 客户关联的项目、用户、Key 无影响，API 调用正常。

***

### CUST-013 - 客户解绑项目（无调用记录）

模块：客户管理\
用例 ID：CUST-013\
用例名称：客户解绑项目（无调用记录）\
测试类型：正常场景

前置条件：

1. 客户 C2 已创建，绑定 projB（状态【启用】）；
2. C2 下无 API 调用记录。

测试步骤：

1. 进入 C2 详情页→【解绑项目】；
2. 确认解绑→提交；
3. 查看 C2 项目绑定状态。

预期结果：

1. 解绑成功，C2 项目绑定状态变为 “未绑定”；
2. 解绑后 C2 下用户的 Key 调用 API 时提示 “客户未绑定项目，请联系运营绑定”；
3. 数据库 customer 表 project\_id 字段置空。

***

# 用户\&Unified Key 管理

### USER-014 - 客户下创建多用户

模块：用户\&Unified Key 管理\
用例 ID：USER-014\
用例名称：客户下创建多用户\
测试类型：正常场景

前置条件：\
客户 C1 已创建（状态【启用】）。

测试步骤：

1. 进入 C1 详情页→【用户管理】→【创建用户】；
2. 创建 user1、user2。

预期结果：

1. C1 下新增 2 个用户，状态【启用】；
2. 数据库 user 表 customer\_id 关联 C1。

***

### USER-015 - 用户创建多 Unified Key

模块：用户\&Unified Key 管理\
用例 ID：USER-015\
用例名称：用户创建多 Unified Key\
测试类型：正常场景

前置条件：\
user1 已创建（状态【启用】）。

测试步骤：

1. 进入 user1 详情页→【Unified Key 管理】→【创建 Key】；
2. 创建 key1、key2。

预期结果：

1. user1 下新增 2 个 Key，状态【启用】；
2. 系统自动生成 AK，SK 加密存储；
3. 数据库 unified\_key 表 user\_id 关联 user1。

***

### USER-016 - 禁用 Unified Key

模块：用户\&Unified Key 管理\
用例 ID：USER-016\
用例名称：禁用 Unified Key\
测试类型：正常场景

前置条件：\
user1 下 key1 已创建（状态【启用】）。

测试步骤：

1. 禁用 key1→用 key1 调用 API；
2. 启用 key1→再次调用。

预期结果：

1. 禁用时：API 调用返回 “Key 已禁用”；
2. 启用时：API 调用恢复正常；
3. Key 状态与 unified\_key.is\_active 同步。

***

### USER-017 - 删除用户 - 级联删除 Key

模块：用户\&Unified Key 管理\
用例 ID：USER-017\
用例名称：删除用户 - 级联删除 Key\
测试类型：关联场景

前置条件：\
user1 下有 key1、key2（均启用）。

测试步骤：

1. 删除 user1→确认操作；
2. 查看 unified\_key 表记录。

预期结果：

1. user1 删除成功，从客户用户列表消失；
2. key1、key2 自动标记为【已删除】（或物理删除）；
3. 无法再用 key1/key2 调用 API。

***

### USER-018 - 客户端用户查看自身 Key

模块：用户\&Unified Key 管理\
用例 ID：USER-018\
用例名称：客户端用户查看自身 Key\
测试类型：权限场景

前置条件：\
user1 登录客户端，名下有 key1、key2。

测试步骤：

1. 客户端进入【API Key 管理】→查看 Key 列表。

预期结果：

1. 仅展示 user1 的 key1、key2（AK 可见，SK 隐藏）；
2. 无法查看其他用户的 Key。

***

# API 调用

### API-019 - 正确 Unified Key 调用

模块：API 调用\
用例 ID：API-019\
用例名称：正确 Unified Key 调用\
测试类型：正常场景

前置条件：

1. user1 的 key1 启用；
2. 客户 C1 绑定 projA（GCP Key 有效）。

测试步骤：

1. 客户端用 key1 的 AK/SK 调用 Gemini API；
2. 查看平台转发请求。

预期结果：

1. 平台鉴权通过，将 key1 映射到 projA 的 GCP Key；
2. 成功转发至 Google Gemini，返回统一格式响应；
3. 数据库记录调用日志（关联 C1、user1、key1、projA）。

***

### API-020 - 无效 Unified Key 调用

模块：API 调用\
用例 ID：API-020\
用例名称：无效 Unified Key 调用\
测试类型：异常场景

前置条件：\
user1 的 key1 启用，但 SK 被篡改。

测试步骤：

1. 用 key1 的 AK + 错误 SK 生成签名，调用 API；
2. 查看响应。

预期结果：

1. 鉴权失败，返回 401（“签名验证失败”）；
2. 未转发至 Google，无计费记录。

***

### API-021 - 多 Key 调用同一客户项目

模块：API 调用\
用例 ID：API-021\
用例名称：多 Key 调用同一客户项目\
测试类型：核心场景

前置条件：\
C1 下 user1 的 key1、user2 的 key2 均启用，绑定 projA。

测试步骤：

1. 用 key1 和 key2 分别调用 API；
2. 查看计费账单。

预期结果：

1. 两次调用均映射到 projA 的 GCP Key；
2. 账单汇总到客户 C1，按实际用量细分（key1 和 key2 的消耗分别记录）。

***

### API-022 - 第三方厂商报错（如 GCP 余额不足等异常情况）

模块：API 调用\
用例 ID：API-022\
用例名称：第三方厂商报错（如 GCP 余额不足等异常情况）\
测试类型：异常场景

前置条件：\
projA 的 GCP Key 有效，但余额为 0。

测试步骤：

1. 用 key1 调用 API；
2. 查看响应。

预期结果：

1. Google 返回 “余额不足”，平台返回统一错误；
2. 调用日志记录失败。

***

### API-023 - 重放攻击防护（相同请求）

模块：API 调用\
用例 ID：API-023\
用例名称：重放攻击防护（相同请求）\
测试类型：安全场景

前置条件：

1. 用 key1 发起有效请求；
2. 10 秒内重复发送同一请求。

测试步骤：

1. 第一次调用：正常响应；
2. 重复调用：查看响应。

预期结果：

1. 重复调用返回 403（“请求重复”）；
2. 仅第一次调用计入账单。

***

### API-024 - 调用 API 的响应数据一致性

模块：API 调用\
用例 ID：API-024\
用例名称：调用 API 的响应数据一致性\
测试类型：核心场景

前置条件：

1. 用 key1 发起有效请求。

测试步骤：

1. 用 key1 调用 API；
2. 查看 Gemini API 的响应值；
3. 查看 Unified API 的响应值。

预期结果：\
Unified API 的 API 调用响应值应与 Gemini API 的响应值保持一致。

***

### API-025 - 调用请求缺失必填参数（如 model）

模块：API 调用\
用例 ID：API-025\
用例名称：调用请求缺失必填参数（如 model）\
测试类型：异常场景

前置条件：

1. user1 的 key1 启用；
2. 客户 C1 绑定的 projA（GCP Key 有效）；
3. Gemini API 要求 “model” 为调用必填参数。

测试步骤：

1. 客户端用 key1 的 AK/SK 调用 API，但未传入 “model” 参数；
2. 查看平台响应。

预期结果：

1. 平台参数校验失败，返回 400（“缺失必填请求参数：model”）；
2. 不转发至 Google Gemini，无计费记录；
3. 日志记录 “参数缺失” 的失败调用信息。

***

### API-026 - 已禁用 Unified Key 调用

模块：API 调用\
用例 ID：API-026\
用例名称：已禁用 Unified Key 调用\
测试类型：异常场景

前置条件：

1. user1 的 key1 曾启用，当前被管理员手动禁用；
2. 客户 C1 绑定的 projA（GCP Key 有效且余额充足）。

测试步骤：

1. 客户端用已禁用 key1 的 AK/SK 调用 Gemini API；
2. 查看平台响应及日志。

预期结果：

1. 平台鉴权失败，返回 403（“Unified Key 已禁用，请联系管理员启用”）；
2. 不转发至 Google Gemini，无计费记录；
3. 数据库记录 “Key 禁用” 的失败调用日志（关联 C1、user1、key1）。

***

### API-027 - 同一客户下 A 用户调用 B 用户的 AK/SK

模块：API 调用\
用例 ID：API-027\
用例名称：同一客户下 A 用户调用 B 用户的 AK/SK\
测试类型：安全 / 权限场景

前置条件：

1. 客户 C1 下，用户 A 的 keyA、用户 B 的 keyB 均启用，且均绑定 projA；
2. keyB 的归属用户为 B（权限仅限 B 用户使用）。

测试步骤：

1. 用户 A 使用用户 B 的 AK/SK 生成签名，调用 Gemini API；
2. 查看平台响应及日志。

预期结果：

1. 平台鉴权失败，返回 401（“AK/SK 归属用户不匹配，无权使用”）；
2. 不转发至 Google Gemini，无计费记录；
3. 日志记录 “跨用户使用 AK/SK” 的失败调用信息（关联 C1、用户 A、keyB）。

***

# 全链路串联测试

### FLOW-028 - 正向全流程：项目→客户→用户→Key→调用→账单→P2

模块：全链路串联测试\
用例 ID：FLOW-028\
用例名称：正向全流程：项目→客户→用户→Key→调用→账单→P2\
测试类型：冒烟测试

前置条件：\
无（从零开始验证）。

测试步骤：

1. 创建项目 projA（有效 GCP Key）；
2. 创建客户 C1（绑定 projA）；
3. 创建用户 user1（归属 C1）；
4. user1 创建 key1（启用）；
5. 用 key1 调用 Gemini API（成功，消耗 10 Token）；
6. 触发 P2 同步；
7. 校验各环节数据。

预期结果：

1. 项目、客户、用户、Key 创建成功，状态均为【启用】；
2. API 调用成功，返回统一响应；
3. 账单明细记录该次调用（10 Token，\$1）；
4. P2 系统同步后数据与平台一致；
5. 全链路无报错，数据关联正确。

***

### FLOW-029 - 异常全流程：项目禁用→客户调用失败

模块：全链路串联测试\
用例 ID：FLOW-029\
用例名称：异常全流程：项目禁用→客户调用失败\
测试类型：故障测试

前置条件：\
完成 FLOW-027 后，禁用项目 projA。

测试步骤：

1. 禁用 projA；
2. 用 key1 再次调用 API；
3. 查看响应和账单。

预期结果：

1. API 调用返回 “项目已禁用”；
2. 账单无新记录；
3. 项目、客户状态同步，关联关系保持。

***

### FLOW-030 - 边界场景：客户下无用户 / Key 调用

模块：全链路串联测试\
用例 ID：FLOW-030\
用例名称：边界场景：客户下无用户 / Key 调用\
测试类型：边界测试

前置条件：\
客户 C2 已创建（绑定 projB），但无用户 / Key。

测试步骤：

1. 尝试用不存在的 Key 调用 API；
2. 查看响应。

预期结果：

1. 响应提示 “无有效 Unified Key，请先创建”；
2. 无调用日志和账单记录。

***

# 性能测试

### PERF-031 - API 网关平均响应延迟（不含第三方耗时）

模块：性能测试\
用例 ID：PERF-031\
用例名称：API 网关平均响应延迟（不含第三方耗时）\
测试类型：性能测试

前置条件：

1. 系统部署完成，正常运行；
2. 准备 100 条有效 API 调用请求（Gemini/Translate 各 50 条）；
3. 压测工具（如 JMeter）配置完成。

测试步骤：

1. 单线程发送 100 条请求，记录每条请求的网关处理时间（从接收请求到转发至第三方 API 的耗时）；
2. 计算平均延迟；
3. 重复测试 3 次取平均值。

预期结果：

1. 平均响应延迟≤500ms；
2. 90% 请求的网关处理时间≤600ms；
3. 无请求网关处理时间≥1000ms。

***

### PERF-032 - 系统支持 100 QPS 并发请求

模块：性能测试\
用例 ID：PERF-032\
用例名称：系统支持 100 QPS 并发请求\
测试类型：负载测试

前置条件：

1. 系统部署完成；
2. 压测工具配置并发线程数 = 100，持续发送请求 30 分钟；
3. 确保 Unified Key 和 GCP Key 均有效。

测试步骤：

1. 启动压测，每秒发送 100 条请求（Gemini/Translate 各 50%）；
2. 监控系统 CPU、内存使用率（≤80%）；
3. 记录成功响应率和平均延迟。

预期结果：

1. 30 分钟内成功响应率≥99.9%；
2. 平均响应延迟（含第三方）≤2000ms（网关部分仍≤500ms）；
3. 系统无崩溃、无内存泄漏（内存使用率稳定）；
4. 数据库连接池无满负荷（空闲连接≥10%）。

***

### PERF-033 - 峰值 150 QPS 下的系统容错性

模块：性能测试\
用例 ID：PERF-033\
用例名称：峰值 150 QPS 下的系统容错性\
测试类型：压力测试

前置条件：\
同 PERF-031，压测工具配置 150 QPS。

测试步骤：

1. 启动压测，持续 10 分钟；
2. 监控系统错误率和延迟变化。

预期结果：

1. 错误率≤5%（超过负载的请求可降级处理，返回 “系统繁忙，请稍后重试”）；
2. 系统不宕机，峰值过后恢复正常处理能力；
3. 无数据丢失（成功请求均记录日志）。

***

### PERF-034 - 大请求体（10KB）下的响应延迟

模块：性能测试\
用例 ID：PERF-034\
用例名称：大请求体（10KB）下的响应延迟\
测试类型：边界测试

前置条件：\
准备 10KB 的请求体（如长文本翻译），单线程发送。

测试步骤：

1. 发送 10 条大请求体 API 调用；
2. 记录网关处理时间。

预期结果：

1. 平均网关处理延迟≤600ms（略高于普通请求，但不超过阈值 50%）；
2. 无请求超时（超时时间≥5s）。

***

# 安全性测试

### SEC-035 - 强制使用 HTTPS 协议

模块：安全性测试\
用例 ID：SEC-035\
用例名称：强制使用 HTTPS 协议\
测试类型：安全测试

前置条件：

1. 系统部署完成；
2. 准备 HTTP 请求工具（如 curl）。

测试步骤：

1. 用 HTTP 协议发送 API 调用（[http://UnifiedAPI.cloud/…）；](http://UnifiedAPI.cloud/%E2%80%A6%EF%BC%89%EF%BC%9B)
2. 查看响应；
3. 尝试 HTTP 访问管理后台。

预期结果：

1. HTTP 请求被拒绝，返回 301 重定向至 HTTPS；
2. 强制 HTTPS 后，浏览器显示安全锁（SSL 证书有效）；
3. 管理后台仅允许 HTTPS 访问，HTTP 访问直接阻断。

***

### SEC-036 - 敏感密钥加密存储（AES）

模块：安全性测试\
用例 ID：SEC-036\
用例名称：敏感密钥加密存储（AES）\
测试类型：安全测试

前置条件：

1. 数据库已存储 Unified SK 和 GCP SK；
2. 拥有数据库查询权限。

测试步骤：

1. 直接查询数据库 unified\_key 表（secret\_key\_encrypted 字段）和 gcp\_key 表（secret\_key\_encrypted 字段）；
2. 检查字段值是否为明文。

预期结果：

1. 所有 SK 字段均为加密字符串（非明文）；
2. 加密算法符合标准；
3. 密钥明文仅在内存中临时使用，不落地存储。

***

### SEC-037 - 密钥鉴权机制有效性

模块：安全性测试\
用例 ID：SEC-037\
用例名称：密钥鉴权机制有效性\
测试类型：安全测试

前置条件：

1. 存在有效 Unified Key（AK1/SK1）；
2. 准备无效 AK（AK2）、无效 SK（SK2）。

测试步骤：

1. 用 AK1+SK2 调用 API；
2. 用 AK2+SK1 调用 API；
3. 用 AK1 + 篡改的签名调用 API。

预期结果：

1. 所有无效组合均返回 401 错误（“AK/SK 无效或签名错误”）；
2. 鉴权失败日志记录详细原因（如 “签名不匹配”“AK 不存在”）；
3. 连续 5 次鉴权失败后，临时锁定该 AK（10 分钟内拒绝请求）。

***

### SEC-038 - 重放攻击防护有效性

模块：安全性测试\
用例 ID：SEC-038\
用例名称：重放攻击防护有效性\
测试类型：安全测试

前置条件：

1. 有效 Unified Key（AK1/SK1）；
2. 抓包工具捕获正常请求。

测试步骤：

1. 复制捕获的请求（含 Timestamp 和签名），10 秒内重复发送；
2. 修改请求 Body 后重复发送相同 Timestamp 和签名；
3. 超过 Timestamp 有效期（如 300 秒）后发送原请求。

预期结果：

1. 10 秒内重复请求：返回 403 错误（“检测到重放攻击，请求已失效”）；
2. 修改 Body 但复用签名：返回 401 错误（“签名验证失败”）；
3. 超时请求：返回 403 错误（“请求已过期，请重新发起”）。

***

### SEC-039 - 敏感信息传输加密

模块：安全性测试\
用例 ID：SEC-039\
用例名称：敏感信息传输加密\
测试类型：安全测试

前置条件：

1. 有效 Unified Key；
2. 抓包工具监控 API 调用过程。

测试步骤：

1. 发送 API 请求，捕获 HTTPS 传输包；
2. 检查包内是否包含 AK/SK 明文。

预期结果：

1. 传输内容均为加密数据，无法解析出 AK/SK 明文；
2. 仅 URL 路径和必要 Header（非敏感）可见。

***

### SEC-040 - 管理后台权限隔离

模块：安全性测试\
用例 ID：SEC-040\
用例名称：管理后台权限隔离\
测试类型：安全测试

前置条件：

1. 存在普通运营账号（无客户删除权限）；
2. 存在管理员账号。

测试步骤：

1. 用普通运营账号尝试删除客户；
2. 用普通运营账号尝试修改 GCP Key；
3. 验证管理员账号是否可执行上述操作。

预期结果：

1. 普通运营账号操作被拒绝，提示 “无权限”；
2. 管理员账号可正常执行操作；
3. 越权操作日志记录（操作人、时间、失败原因）。

***

# 可用性测试

### AVAIL-041 - 第三方 API 故障降级机制

模块：可用性测试\
用例 ID：AVAIL-041\
用例名称：第三方 API 故障降级机制\
测试类型：容错测试

前置条件：

1. 客户绑定的 GCP Key 临时失效（如网络不通）；
2. 发送 API 调用请求。

测试步骤：

1. 模拟 GCP 服务不可用（如拦截请求）；
2. 观察系统响应和恢复情况。

预期结果：

1. 检测到第三方故障后，返回统一错误（“第三方服务暂时不可用，已自动切换备用通道”）；
2. 若有备用 GCP Key，自动切换（切换时间≤5 秒）；
3. 第三方恢复后，自动切回主通道。

[返回主页](https://joplin.lxztzp.top/shares/V61FFt1i173D8ais8fXzi2)

***

**🎖️ Author:** 谭仔鹏 ：Tanzipeng\
**📧 Email:** <3290610380@qq.com>\
**📞 Phone:** 13323763643

***

<style>
/* 隐藏顶部导航栏 (包括Joplin图标和链接) */
body.page-note nav.navbar {
    display: none !important;
}

/* 隐藏底部的“Powered by Joplin”的页脚 (可选) */
body.page-note > div.footer {
    display: none !important;
}

/* 调整页面内容，使其从顶部开始（可选，避免隐藏顶部导航后页面内容没有抬高） */
body.page-note > div.content {
    padding-top: 20px !important; 
}
</style>

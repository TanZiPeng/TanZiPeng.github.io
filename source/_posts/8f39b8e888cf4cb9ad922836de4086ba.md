---
layout: post
title: Unified-测试用例
abbrlink: 8f39b8e888cf4cb9ad922836de4086ba
tags: []
categories:
  - 工作笔记
  - 测试相关
date: 1756175711011
updated: 1756369130862
---

## 测试用例设计说明

测试用例基于UnifiedAPI需求文档核心业务逻辑（**客户绑定1个GCP AK/SK→客户下多用户→用户分配多Unified AK/SK→计费归属客户**），覆盖客户管理、用户管理、密钥管理、API调用、计费账单、运营管理等核心模块，包含**正常场景、异常场景、边界场景**，确保业务流程完整性与功能正确性。

## 1. 客户管理模块测试用例

| 用例ID     | 用例名称                | 测试类型 | 前置条件                                          | 测试步骤                                                                                             | 预期结果                                                                                                                                 |
| -------- | ------------------- | ---- | --------------------------------------------- | ------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------ |
| CUST-001 | 运营端创建客户（绑定有效项目/GCP） | 正常场景 | 1. 运营管理员登录运营后台；2. 已创建有效项目（关联可用GCP AK/SK，验证通过） | 1. 进入「客户管理」→点击「创建客户」；  <br>2. 输入客户名称（如“测试客户A”）、公司信息（如“测试公司”）；  <br>3. 选择已创建的有效项目；  <br>4. 点击「提交」 | 1. 客户创建成功，状态为「启用」；  <br>2. 客户绑定的项目/GCP AK/SK正确；  <br>3. 同步生成客户初始客户端用户（若文档默认配置）；  <br>4. 数据库CUSTOMER表新增记录，customer\_id关联项目project\_id |
| CUST-002 | 创建客户时绑定无效GCP的项目     | 异常场景 | 1. 运营管理员登录；2. 已创建项目（关联无效GCP AK/SK，验证失败）       | 1. 进入「客户管理」→「创建客户」；  <br>2. 输入客户信息，选择无效GCP的项目；  <br>3. 点击「提交」                                    | 1. 系统提示“所选项目的GCP AK/SK不可用，请更换有效项目”；  <br>2. 客户创建失败，数据库无新增记录                                                                          |
| CUST-003 | 客户绑定第二个项目（多GCP）     | 异常场景 | 1. 运营管理员登录；2. 客户A已绑定项目1（关联GCP-1）              | 1. 进入客户A详情页→点击「更换项目」；  <br>2. 选择项目2（关联GCP-2）；  <br>3. 点击「确认」                                     | 1. 系统提示“一个客户仅支持绑定1个项目（对应1个GCP AK/SK），请先解绑当前项目”；  <br>2. 客户绑定的项目仍为项目1，未切换至项目2                                                         |
| CUST-004 | 编辑客户基本信息（非绑定项目）     | 正常场景 | 1. 运营管理员登录；2. 客户A已创建并启用                       | 1. 进入客户A详情页→点击「编辑」；  <br>2. 修改公司信息（如“更新测试公司”）；  <br>3. 点击「保存」                                    | 1. 客户基本信息更新成功；  <br>2. 客户绑定的项目/GCP AK/SK无变化；  <br>3. 数据库CUSTOMER表company\_info字段更新                                                   |
| CUST-005 | 禁用/启用客户             | 正常场景 | 1. 运营管理员登录；2. 客户A已创建（状态「启用」）                  | 1. 进入「客户管理」→勾选客户A→点击「禁用」；  <br>2. 确认禁用操作；  <br>3. 再次勾选客户A→点击「启用」                                 | 1. 禁用后：客户状态变为「禁用」，其下所有用户/Unified Key无法调用API；  <br>2. 启用后：客户状态恢复「启用」，用户/Unified Key恢复调用权限；  <br>3. 数据库CUSTOMER表is\_active字段同步更新       |
| CUST-006 | 查询客户列表（按状态/名称筛选）    | 正常场景 | 1. 运营管理员登录；2. 系统已创建多个客户（含启用/禁用状态）             | 1. 进入「客户管理」→选择筛选条件「状态=启用」；  <br>2. 输入客户名称关键词「测试」→点击「查询」                                          | 1. 筛选结果仅展示状态为「启用」且名称含「测试」的客户；  <br>2. 结果包含客户ID、名称、绑定项目、创建时间等信息，与数据库一致                                                                |
| CUST-007 | 创建客户时客户名称为空/过长      | 边界场景 | 运营管理员登录运营后台                                   | 1. 点击「创建客户」→客户名称留空→提交；  <br>2. 重新点击「创建客户」→输入256字符的名称（如“a…”\*256）→提交                              | 1. 名称空时：提示“客户名称不能为空”，创建失败；  <br>2. 名称过长时：提示“客户名称长度不能超过255字符”，创建失败                                                                    |

## 2. 用户管理模块测试用例（客户下多用户）

| 用例ID     | 用例名称                   | 测试类型 | 前置条件                                     | 测试步骤                                                                                                     | 预期结果                                                                                                                      |
| -------- | ---------------------- | ---- | ---------------------------------------- | -------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------- |
| USER-001 | 给客户创建多个用户              | 正常场景 | 1. 运营管理员登录；2. 客户A已创建（状态「启用」）             | 1. 进入客户A详情页→「用户管理」→「创建用户」；  <br>2. 输入用户1信息（用户名：user1，手机号：13800138001）→提交；  <br>3. 重复步骤2，创建用户2（用户名：user2） | 1. 客户A下新增用户1、用户2，状态均为「启用」；  <br>2. 数据库用户表新增2条记录，customer\_id均关联客户A的ID；  <br>3. 可在客户A的用户列表中查看2个用户                          |
| USER-002 | 创建用户时用户名重复（同一客户）       | 异常场景 | 1. 运营管理员登录；2. 客户A下已创建用户1（用户名：user1）      | 1. 客户A「用户管理」→「创建用户」；  <br>2. 输入用户名：user1，其他信息不同→提交                                                       | 系统提示“同一客户下用户名已存在，请更换用户名”，用户创建失败                                                                                           |
| USER-003 | 编辑用户信息（手机号/状态）         | 正常场景 | 1. 运营管理员登录；2. 客户A下有用户1（状态「启用」）           | 1. 进入用户1详情页→「编辑」；  <br>2. 修改手机号为13900139001，状态改为「禁用」→保存                                                  | 1. 用户1手机号更新成功，状态变为「禁用」；  <br>2. 禁用后用户1的所有Unified Key无法调用API；  <br>3. 数据库用户表对应字段同步更新                                       |
| USER-004 | 查询客户下的用户列表             | 正常场景 | 1. 运营管理员登录；2. 客户A下有3个用户（2个启用，1个禁用）       | 1. 进入客户A详情页→「用户管理」；  <br>2. 筛选条件选择「状态=启用」→查询                                                             | 1. 仅展示客户A下2个启用状态的用户；  <br>2. 列表包含用户名、手机号、创建时间、状态等信息，与数据库一致                                                                |
| USER-005 | 删除客户下的用户（含Unified Key） | 正常场景 | 1. 运营管理员登录；2. 客户A下有用户1（已分配2个Unified Key） | 1. 客户A「用户管理」→勾选用户1→「删除」；  <br>2. 确认删除操作                                                                  | 1. 用户1删除成功，从客户A的用户列表中消失；  <br>2. 用户1关联的所有Unified Key自动删除（或标记为「已删除」）；  <br>3. 数据库用户表用户1记录标记为删除（或物理删除），Unified Key表关联记录同步处理 |

## 3. Unified AK/SK管理模块测试用例（用户分配多Key）

| 用例ID   | 用例名称                   | 测试类型 | 前置条件                               | 测试步骤                                                                                                     | 预期结果                                                                                                                                  |
| ------ | ---------------------- | ---- | ---------------------------------- | -------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------- |
| UK-001 | 给用户分配多个Unified Key     | 正常场景 | 1. 运营管理员登录；2. 客户A下有用户1（状态「启用」）     | 1. 进入用户1详情页→「Unified Key管理」→「创建Key」；  <br>2. 输入Key描述（如“Key1-测试用”）→提交；  <br>3. 重复步骤2，创建Key2（描述“Key2-生产用”） | 1. 用户1下新增Key1、Key2，状态均为「启用」；  <br>2. 系统自动生成唯一的Unified AK，SK加密存储（数据库secret\_key\_encrypted字段非明文）；  <br>3. 可在用户1的Key列表中查看2个Key的AK、描述、状态 |
| UK-002 | 禁用/启用用户的Unified Key    | 正常场景 | 1. 运营管理员登录；2. 用户1下有Key1（状态「启用」）    | 1. 进入用户1「Unified Key管理」→勾选Key1→「禁用」；  <br>2. 确认禁用；  <br>3. 再次勾选Key1→「启用」                                 | 1. 禁用后：Key1状态变为「禁用」，用该Key调用API失败；  <br>2. 启用后：Key1恢复「启用」，可正常调用API；  <br>3. 数据库UNIFIED\_KEY表is\_active字段同步更新                           |
| UK-003 | 删除用户的Unified Key       | 正常场景 | 1. 运营管理员登录；2. 用户1下有Key1（状态「禁用」）    | 1. 进入用户1「Unified Key管理」→勾选Key1→「删除」；  <br>2. 确认删除                                                        | 1. Key1删除成功，从用户1的Key列表中消失；  <br>2. 数据库UNIFIED\_KEY表Key1记录标记为删除（或物理删除）；  <br>3. 无法再用Key1调用API                                          |
| UK-004 | 客户/用户禁用后，Unified Key状态 | 关联场景 | 1. 运营管理员登录；2. 客户A下用户1有Key1（状态「启用」） | 1. 禁用客户A；  <br>2. 查看用户1的Key1状态；  <br>3. 启用客户A，禁用用户1；  <br>4. 查看Key1状态                                    | 1. 客户A禁用后：Key1自动变为「禁用」；  <br>2. 客户A启用、用户1禁用后：Key1仍为「禁用」；  <br>3. 仅当客户+用户均「启用」时，Key1可手动启用                                              |
| UK-005 | 客户端查询自身的Unified Key列表  | 正常场景 | 1. 客户端用户1登录；2. 用户1下有2个Unified Key  | 1. 客户端进入「API Key管理」页面；  <br>2. 查看Key列表                                                                   | 1. 列表展示用户1的所有Unified Key（仅显示AK，不显示SK）；  <br>2. 包含Key描述、状态、创建时间，与运营端一致                                                                 |
| UK-006 | 生成Unified Key时描述过长     | 边界场景 | 1. 运营管理员登录；2. 用户1状态「启用」            | 1. 点击「创建Key」→输入500字符描述（如“a…”\*500）→提交                                                                    | 系统提示“Key描述长度不能超过255字符”，Key创建失败                                                                                                        |

## 4. GCP AK/SK与项目管理模块测试用例

| 用例ID    | 用例名称               | 测试类型 | 前置条件                                 | 测试步骤                                                                                                | 预期结果                                                                                                                       |
| ------- | ------------------ | ---- | ------------------------------------ | --------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------- |
| GCP-001 | 创建项目并关联有效GCP AK/SK | 正常场景 | 运营管理员登录运营后台                          | 1. 进入「项目管理」→「创建项目」；  <br>2. 输入项目名称（如“项目A”）、GCP AK、GCP SK；  <br>3. 点击「验证GCP Key可用性」；  <br>4. 验证通过后提交 | 1. 项目创建成功，状态「启用」；  <br>2. GCP SK加密存储（数据库GCP\_KEY表secret\_key\_encrypted非明文）；  <br>3. 数据库PROJECT表新增记录，关联GCP\_KEY表ID         |
| GCP-002 | 创建项目时关联无效GCP AK/SK | 异常场景 | 运营管理员登录运营后台                          | 1. 进入「项目管理」→「创建项目」；  <br>2. 输入项目名称、无效GCP AK/SK（如错误AK）；  <br>3. 点击「验证GCP Key可用性」                     | 1. 验证失败，系统提示“GCP AK/SK无效或无权限，请检查后重试”；  <br>2. 项目创建无法提交，数据库无新增记录                                                            |
| GCP-003 | 编辑项目的GCP AK/SK     | 正常场景 | 1. 运营管理员登录；2. 项目A已创建（关联GCP-1，状态「启用」） | 1. 进入项目A详情页→「编辑GCP Key」；  <br>2. 输入新的有效GCP-2 AK/SK→验证→保存                                            | 1. 项目A关联的GCP Key更新为GCP-2；  <br>2. 数据库GCP\_KEY表项目A关联的记录更新为GCP-2信息；  <br>3. 绑定项目A的客户，后续API调用使用GCP-2计费                        |
| GCP-004 | 验证项目GCP Key实时可用性   | 正常场景 | 1. 运营管理员登录；2. 项目A已创建（关联GCP-1）        | 1. 进入项目A详情页→点击「重新验证GCP Key」；  <br>2. 若GCP-1已失效（如被删除），观察结果                                           | 1. 若GCP-1有效：提示“GCP Key可用”，项目状态保持「启用」；  <br>2. 若GCP-1失效：提示“GCP Key已失效”，项目状态变为「禁用」；  <br>3. 绑定项目A的客户无法调用API，直至项目GCP Key更新为有效 |

## 5. API调用鉴权模块测试用例

| 用例ID     | 用例名称                          | 测试类型 | 前置条件                                                                            | 测试步骤                                                                                                                                                               | 预期结果                                                                                                                                                                                              |
| -------- | ----------------------------- | ---- | ------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| AUTH-001 | 用有效Unified Key调用Gemini API    | 正常场景 | 1. 客户A（绑定项目A/GCP-1，状态「启用」）；  <br>2. 客户A下用户1有Key1（「启用」）；  <br>3. 客户端获取Key1的AK/SK | 1. 客户端构造请求：  <br>- URL：<https://Gemini.UnifiedAPI.cloud/v1/chat>  <br>- Header：Unified AK、签名（SK生成）、Timestamp  <br>- Body：{“prompt”: “Hello”}  <br>2. 发送HTTPS请求     | 1. 网关鉴权通过，转发请求至Gemini适配器；  <br>2. 适配器用GCP-1 AK/SK调用Google Gemini API；  <br>3. 客户端收到统一格式响应：{“response”: “Hi there!”, “request\_id”: “…”, “timestamp”: “…”}；  <br>4. 系统记录调用日志（关联客户A、用户1、Key1、GCP-1） |
| AUTH-002 | 用有效Unified Key调用Translate API | 正常场景 | 同AUTH-001，仅API改为Translate                                                       | 1. 客户端构造请求：  <br>- URL：<https://Translate.UnifiedAPI.cloud/v1/translate>  <br>- Header：Key1的AK/签名  <br>- Body：{“text”: “Hello”, “target\_lang”: “zh”}  <br>2. 发送请求 | 1. 鉴权通过，转发至Translate适配器；  <br>2. 用GCP-1调用Google Translate API；  <br>3. 客户端收到统一格式响应：{“response”: “你好”, “request\_id”: “…”}；  <br>4. 调用日志关联客户A，计费归属客户A                                              |
| AUTH-003 | 用错误Unified AK调用API            | 异常场景 | 客户端持有无效AK（如随机字符串），其他条件同AUTH-001                                                 | 1. 构造请求，Header中AK为错误值；  <br>2. 发送请求                                                                                                                                | 1. 网关鉴权失败，返回401错误；  <br>2. 响应提示：“Unified AK不存在或无效”；  <br>3. 未转发至厂商API，无计费记录                                                                                                                       |
| AUTH-004 | 用错误Unified SK签名调用API          | 异常场景 | 客户端持有正确AK，但SK错误（签名生成错误），其他同AUTH-001                                             | 1. 构造请求，AK正确，签名用错误SK生成；  <br>2. 发送请求                                                                                                                               | 1. 网关鉴权失败，返回401错误；  <br>2. 响应提示：“Unified AK/SK签名验证失败”；  <br>3. 未转发至厂商API                                                                                                                          |
| AUTH-005 | 用禁用的Unified Key调用API          | 异常场景 | 用户1的Key1已被禁用，其他同AUTH-001                                                        | 1. 用Key1的AK/SK构造请求；  <br>2. 发送请求                                                                                                                                   | 1. 网关鉴权失败，返回403错误；  <br>2. 响应提示：“Unified AK/SK已禁用，请联系运营管理员”；  <br>3. 无计费记录                                                                                                                        |
| AUTH-006 | 重放攻击防护（重复发送相同请求）              | 安全场景 | 1. 客户端获取有效请求（含Timestamp、签名）；  <br>2. 重复发送该请求                                    | 1. 发送第一次请求（有效），记录响应；  <br>2. 10秒内重复发送相同请求（未修改Timestamp/签名）                                                                                                         | 1. 第一次请求：正常响应（同AUTH-001）；  <br>2. 重复请求：网关返回403错误；  <br>3. 响应提示：“请求已过期或存在重放风险，请重新发起请求”                                                                                                             |
| AUTH-007 | 未带Unified AK/SK调用API          | 异常场景 | 客户端构造请求时，Header不包含AK/SK                                                         | 发送请求                                                                                                                                                               | 1. 网关返回401错误；  <br>2. 响应提示：“请提供有效的Unified AK/SK”；  <br>3. 未转发至厂商API                                                                                                                               |

## 6. 厂商API适配模块测试用例

| 用例ID      | 用例名称                 | 测试类型 | 前置条件                                                                                                                 | 测试步骤                                                                                                        | 预期结果                                                                                                                                                                             |
| --------- | -------------------- | ---- | -------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| ADAPT-001 | Gemini请求参数转换（平台→GCP） | 正常场景 | 同AUTH-001，客户端发送平台通用格式请求                                                                                              | 1. 客户端发送请求Body：{“prompt”: “Hello”, “max\_tokens”: 100}（平台通用格式）；  <br>2. 查看网关→适配器的请求转换                       | 1. 适配器将平台通用参数转换为GCP Gemini格式（如{“contents”: \[{“parts”: \[{“text”: “Hello”}]}], “generationConfig”: {“maxOutputTokens”: 100}}）；  <br>2. 正确转发至Google Gemini API                    |
| ADAPT-002 | Gemini响应转换（GCP→平台）   | 正常场景 | 同AUTH-001，Google Gemini返回原始响应                                                                                        | 1. Google返回原始响应：{“candidates”: \[{“content”: {“parts”: \[{“text”: “Hi there!”}]}}]}；  <br>2. 查看适配器→客户端的响应转换 | 1. 适配器将GCP格式转换为平台统一格式：{“response”: “Hi there!”, “request\_id”: “…”, “timestamp”: “…”}；  <br>2. 客户端收到统一格式响应，无GCP私有字段                                                              |
| ADAPT-003 | Translate请求参数转换      | 正常场景 | 同AUTH-002，客户端发送平台通用格式请求                                                                                              | 1. 客户端发送Body：{“text”: “Hello”, “source\_lang”: “en”, “target\_lang”: “zh”}；  <br>2. 查看转换结果                  | 1. 适配器转换为GCP Translate格式：{“q”: \[“Hello”], “source”: “en”, “target”: “zh”, “format”: “text”}；  <br>2. 正确转发至Google Translate API                                                  |
| ADAPT-004 | 厂商API返回错误时的适配处理      | 异常场景 | 1. 客户A的GCP-1 AK/SK有效，但余额不足；  <br>2. 客户端用Key1调用Gemini API                                                             | 1. 客户端发送请求；  <br>2. Google Gemini返回“余额不足”错误（403 Insufficient Funds）                                         | 1. 适配器接收GCP错误，转换为平台统一错误格式：{“error\_code”: “GCP\_INSUFFICIENT\_FUNDS”, “error\_msg”: “GCP账户余额不足，无法调用API”, “request\_id”: “…”}；  <br>2. 客户端收到统一错误响应，明确错误原因；  <br>3. 系统记录错误日志，关联客户A |
| ADAPT-005 | 调用不存在的厂商API服务        | 异常场景 | 客户端构造请求，URL为不存在的厂商服务（如[https://Invalid.UnifiedAPI.cloud/v1/test）](https://Invalid.UnifiedAPI.cloud/v1/test%EF%BC%89) | 发送请求                                                                                                        | 1. 网关返回404错误；  <br>2. 响应提示：“请求的厂商服务不存在，请检查URL”；  <br>3. 未转发至任何厂商API                                                                                                              |

## 7. 计费与账单模块测试用例

| 用例ID     | 用例名称             | 测试类型 | 前置条件                                                                      | 测试步骤                                                                | 预期结果                                                                                                                                                     |
| -------- | ---------------- | ---- | ------------------------------------------------------------------------- | ------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------- |
| BILL-001 | API调用后日志记录（关联客户） | 正常场景 | 同AUTH-001，客户端用Key1调用Gemini API成功                                          | 1. 发送API请求并成功接收响应；  <br>2. 运营端进入「日志管理」→筛选客户A、时间范围                   | 1. 日志记录包含：客户ID（客户A）、用户ID（用户1）、Unified Key ID（Key1）、项目ID（项目A）、GCP Key ID（GCP-1）、调用时间、API类型（Gemini）、Token消耗（如10）、请求ID；  <br>2. 日志与客户端调用行为完全匹配              |
| BILL-002 | 客户账单汇总（按时间段）     | 正常场景 | 1. 客户A在2024-08-01至2024-08-31期间有10次Gemini调用、5次Translate调用；  <br>2. 运营管理员登录 | 1. 进入「账单管理」→选择客户A→时间范围“2024-08-01至2024-08-31”→查询；  <br>2. 查看账单明细与汇总 | 1. 账单汇总展示：总调用次数15次（Gemini10次、Translate5次）、总Token消耗（如Gemini10*10 + Translate5*5=125）、关联GCP账户（GCP-1）；  <br>2. 账单明细与API调用日志一一对应；  <br>3. 汇总数据=明细数据求和，无遗漏/重复 |
| BILL-003 | 客户账单与GCP计费对齐     | 正常场景 | 1. 客户A的GCP-1在Google平台有明确计费记录（如10次Gemini调用消耗\$1）；  <br>2. 平台已同步GCP计费数据     | 1. 运营端查看客户A的平台账单；  <br>2. 对比Google平台GCP-1的账单                        | 1. 平台账单中客户A的调用次数、Token消耗与GCP平台一致；  <br>2. 计费金额（若平台按GCP汇率转换）与GCP账单一致，无偏差                                                                                  |
| BILL-004 | 对接P2系统拉取客户账单     | 正常场景 | 1. P2系统已存储客户A的历史账单数据；  <br>2. 运营管理员登录运营后台                                 | 1. 进入「账单管理」→「同步P2数据」→选择客户A、时间范围；  <br>2. 点击「拉取」                     | 1. 系统成功从P2拉取客户A的账单数据；  <br>2. 平台本地账单与P2拉取的数据一致（客户ID、时间段、金额）；  <br>3. 拉取记录日志保存，可追溯                                                                        |
| BILL-005 | 客户端查看自身账单        | 正常场景 | 1. 客户端用户1登录；  <br>2. 用户1的Key1有5次API调用记录                                   | 1. 客户端进入「账单查看」→选择时间范围；  <br>2. 查看账单                                 | 1. 客户端账单仅展示用户1关联的调用记录（5次），不展示其他用户数据；  <br>2. 账单包含调用时间、API类型、Token消耗，与运营端对应明细一致；  <br>3. 无客户级汇总数据（仅运营端可见）                                                 |

## 8. 运营管理模块测试用例

| 用例ID    | 用例名称               | 测试类型 | 前置条件                                                             | 测试步骤                                                                                        | 预期结果                                                                                                                  |
| ------- | ------------------ | ---- | ---------------------------------------------------------------- | ------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------- |
| OPS-001 | 运营端查看全局API调用监控     | 正常场景 | 1. 运营管理员登录；  <br>2. 系统有多个客户的API调用记录（Gemini/Translate）            | 1. 进入「监控中心」→选择「API调用监控」；  <br>2. 查看实时QPS、今日总调用量、各厂商API调用占比                                  | 1. 监控数据实时更新：QPS显示当前并发（如50 QPS）、今日总调用量（如1000次）；  <br>2. 各厂商占比正确（如Gemini 70%、Translate 30%）；  <br>3. 可下钻查看某客户/某API的调用趋势 |
| OPS-002 | 运营端权限分配（普通运营vs管理员） | 权限场景 | 1. 系统存在2个运营账号：admin（管理员）、op1（普通运营）；  <br>2. 配置普通运营仅能查看账单，无客户编辑权限 | 1. 用op1登录→进入「客户管理」→点击「编辑客户」；  <br>2. 用op1登录→进入「账单管理」→查看客户账单；  <br>3. 用admin登录→进入「客户管理」→编辑客户 | 1. op1编辑客户：提示“无权限执行此操作，请联系管理员”；  <br>2. op1查看账单：正常展示，可查询/导出；  <br>3. admin编辑客户：正常操作，可修改客户信息；  <br>4. 权限控制符合配置，无越权操作   |
| OPS-003 | 运营端查看客户数据可视化报表     | 正常场景 | 1. 运营管理员登录；  <br>2. 系统有3个客户的月度数据（调用量、计费金额）                       | 1. 进入「数据报表」→选择「客户数据报表」→月度；  <br>2. 查看柱状图（客户调用量对比）、饼图（客户计费占比）                                | 1. 可视化图表数据与实际客户数据一致（如客户A调用量500次、占比50%）；  <br>2. 可导出报表（Excel/PDF），导出数据与页面展示一致；  <br>3. 报表支持按调用量/计费金额排序                 |
| OPS-004 | 运营端日志管理（查询/导出）     | 正常场景 | 1. 运营管理员登录；  <br>2. 系统有客户创建、API调用、账单同步等日志                        | 1. 进入「日志管理」→筛选类型“客户操作”、时间范围；  <br>2. 勾选日志→点击「导出」                                            | 1. 筛选结果仅展示客户操作日志（如客户A创建、客户B禁用）；  <br>2. 导出文件包含日志ID、操作人、操作时间、操作内容、结果，与页面一致；  <br>3. 日志不可修改，仅可查询/导出                     |

## 测试用例覆盖总结

| 核心业务点                     | 覆盖用例数 | 覆盖模块          |
| ------------------------- | ----- | ------------- |
| 客户绑定1个GCP AK/SK           | 4     | 客户管理、项目管理     |
| 客户下多用户管理                  | 5     | 用户管理          |
| 用户分配多Unified AK/SK        | 6     | Unified Key管理 |
| API调用鉴权（含安全防护）            | 7     | API调用鉴权       |
| 厂商API适配（Gemini/Translate） | 5     | 厂商适配层         |
| 计费归属客户（日志/账单）             | 5     | 计费与账单         |
| 运营端管理（监控/权限/报表）           | 4     | 运营管理          |

所有用例均围绕“**客户→用户→密钥→调用→计费**”核心业务链路设计，无关键业务断点，可有效验证UnifiedAPI平台功能正确性与业务完整性。

 

测试用例文件：[Unified测试用例.xlsx](/resources/3593d2c5e1a84d2993e72cb7a0b30c03.xlsx)

[总目录](https://joplin.lxztzp.top/shares/V61FFt1i173D8ais8fXzi2)

***

<div style="max-width: 350px; margin: 30px auto; padding: 20px; border-radius: 10px; background-color: #ffffff; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08); /* 柔和阴影 */    font-family: &apos;Segoe UI&apos;, &apos;Helvetica Neue&apos;, Arial, sans-serif; color: #333;">

##### 关于作者 / About the Author

<div style="display: flex; flex-direction: column; align-items: center; gap: 15px;"><div style="font-size: 1.25em; font-weight: bold; color: #1a73e8;">谭仔鹏</div><div style="width: 100%; border-top: 1px dashed #f0f0f0; padding-top: 10px; text-align: center;">\\\\\\\*\\\\\\\*📧 Email:\\\\\\\*\\\\\\\* \\\\\\\[3290610380@qq.com\\\\\\\](mailto:3290610380@qq.com)</div><div style="width: 100%; border-top: 1px dashed #f0f0f0; padding-top: 10px; text-align: center;">\\\\\\\*\\\\\\\*📞 Phone:\\\\\\\*\\\\\\\* <span style="color: #1a73e8;">13323763643</span></div></div></div>

***

<style>
/* 隐藏顶部导航栏 (包括Joplin图标和链接) */
body.page-note nav.navbar {
    display: none !important;
}

/* 隐藏底部的“Powered by Joplin”的页脚 (可选) */
body.page-note > div.footer {
    display: none !important;
}

/* 调整页面内容，使其从顶部开始（可选，避免隐藏顶部导航后页面内容没有抬高） */
body.page-note > div.content {
    padding-top: 20px !important; 
}
</style>

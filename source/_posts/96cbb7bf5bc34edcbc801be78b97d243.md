---
layout: post
title: Redis部署教程
abbrlink: 96cbb7bf5bc34edcbc801be78b97d243
tags:
  - docker
categories:
  - blog
  - Docker技术
date: 1757498104620
updated: 1757553288382
---

***

### 1. 安装 Docker

首先，你需要确保你的系统上已经安装了 Docker。如果你还没有安装，请访问 [Docker 官方网站](https://www.docker.com/)，根据你的操作系统找到对应的安装指南并进行安装。

***

### 2. 拉取 Redis 镜像

Docker Hub 上提供了官方的 Redis 镜像。打开终端或命令提示符，运行以下命令来拉取最新版本的 Redis 镜像

```Bash
docker pull redis
```

如果你想拉取特定版本的镜像，可以在后面加上版本号，例如：

```Bash
docker pull redis:6.2.7
```

***

### 3. 运行 Redis 容器

拉取完镜像后，你可以使用 `docker run` 命令来创建并运行 Redis 容器。下面是一个基本的命令，它将 Redis 容器的 6379 端口映射到宿主机的 6379 端口，并给容器指定一个名称。

```Bash
docker run -d --name my-redis -p 6379:6379 redis
```

- `-d`：让容器在后台运行。

- `--name my-redis`：为容器指定一个名称，方便管理。

- `-p 6379:6379`：将容器的 6379 端口（Redis 默认端口）映射到宿主机的 6379 端口。

- `redis`：指定要运行的镜像名称。

***

### 4. 连接到 Redis 容器

容器成功运行后，你可以通过多种方式连接到 Redis。

**方法一：通过 Redis CLI 连接**

你可以直接在容器内部使用 Redis 的命令行客户端（CLI）。

首先，进入 Redis 容器的 shell：

```Bash
docker exec -it my-redis bash
```

然后，在容器内部运行 `redis-cli` 命令来连接到 Redis 服务器：

```Bash
redis-cli
```

现在，你就可以执行各种 Redis 命令了，比如：

```Bash
127.0.0.1:6379> ping
PONG
127.0.0.1:6379> set mykey "Hello Docker"
OK
127.0.0.1:6379> get mykey
"Hello Docker"
```

**方法二：通过外部客户端连接**

你可以使用任何支持 Redis 协议的外部客户端（如 Redis Desktop Manager, `redis-cli` 等）连接到宿主机的 `localhost:6379`。

- **主机/IP地址**：`127.0.0.1` 或 `localhost`

- **端口**：`6379`

***

### 5. 高级配置：设置密码

为了安全起见，通常需要为 Redis 设置密码。你可以通过在运行容器时传递 `requirepass` 参数来设置密码。

```
docker run -d --name my-redis-secured -p 6379:6379 redis redis-server --requirepass "your_redis_password"
```

- `redis-server --requirepass "your_redis_password"`：这是传递给 Redis 的启动命令，用于设置密码。请将 `your_redis_password` 替换为你自己的密码。

当你用密码连接时，需要使用 `-a` 参数：

```Bash
docker exec -it my-redis-secured bash
redis-cli -a "your_redis_password"
```

或者，如果你在外部连接，客户端会提示你输入密码进行身份验证。

***

### 6. 高级配置：数据持久化

Redis 支持两种持久化方式：RDB 和 AOF。为了避免容器删除后数据丢失，你可以将 Redis 的数据文件映射到宿主机的一个目录。

```Bash
docker run -d --name my-redis-persist \
-p 6379:6379 \
-v /path/to/your/data:/data \
redis redis-server --appendonly yes
```

- `-v /path/to/your/data:/data`：将宿主机的 `/path/to/your/data` 目录映射到容器内部的 `/data` 目录。

- `redis-server --appendonly yes`：这会启用 AOF 持久化模式，将所有写操作日志追加到 `/data` 目录下的 `appendonly.aof` 文件中。

***

### 7. 常用管理命令

- **查看运行中的容器**：

  ```Bash
  docker ps
  ```

- **停止容器**：

  ```Bash
  docker stop my-redis
  ```

- **启动已停止的容器**：

  ```Bash
  docker start my-redis
  ```

- **删除容器**：

  ```Bash
  docker rm my-redis
  ```

  在删除容器之前，请确保它已停止。

- **删除镜像**：

  ```Bash
  docker rmi redis
  ```

  在删除镜像之前，你需要先删除依赖于它的容器。

通过以上步骤，你就可以轻松地在 Docker 中部署和管理 Redis 了。
